<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>사내 영상 리뷰 대시보드 (다크 모드 프로토타입)</title>
    <!-- Tailwind CSS 로드 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Inter 폰트 설정 및 다크 모드 기본 스타일 */
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        /* 다크 모드 강제 적용 */
        :root {
            --color-bg-primary: #111827; /* Gray-900 */
            --color-bg-secondary: #1f2937; /* Gray-800 */
            --color-text-primary: #f3f4f6; /* Gray-100 */
            --color-border: #374151; /* Gray-700 */
        }
        body {
            background-color: var(--color-bg-primary);
            color: var(--color-text-primary);
        }
        .card {
            background-color: var(--color-bg-secondary);
            border: 1px solid var(--color-border);
        }
        .table-header {
            background-color: #374151; /* Gray-700 */
        }
        /* 스크롤바 커스터마이징 (선택사항이나 다크 모드에서 유용) */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 10px; }
        ::-webkit-scrollbar-track { background: var(--color-bg-primary); }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
</head>

<body class="min-h-screen p-4 sm:p-8">

    <!-- 상단 헤더 및 최종 결정 버튼 -->
    <header class="mb-6 flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
        <h1 class="text-3xl font-bold text-gray-100">영상 리뷰 및 승인 대시보드</h1>
        <div class="flex space-x-4">
            <!-- 최종 승인 버튼 (기획팀 요구: 직관적 UI) -->
            <button id="approveBtn"
                class="bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 px-6 rounded-lg transition duration-200 shadow-lg hover:shadow-emerald-500/50">
                ✅ 최종 승인
            </button>
            <!-- 반려 버튼 -->
            <button id="rejectBtn"
                class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg transition duration-200 shadow-lg hover:shadow-red-500/50">
                ❌ 반려
            </button>
        </div>
    </header>

    <!-- 메인 콘텐츠 영역: 영상 플레이어 및 댓글 목록 -->
    <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">

        <!-- 1. 영상 플레이어 영역 (기획팀 요구: 직관적 UI) -->
        <section class="lg:col-span-2 card p-4 rounded-xl shadow-2xl">
            <h2 class="text-xl font-semibold mb-3 text-gray-200">리뷰 대상 영상</h2>
            <div class="aspect-video bg-gray-900 rounded-lg overflow-hidden">
                <!-- 더미 영상 플레이어 -->
                <iframe 
                    width="100%" 
                    height="100%" 
                    src="https://www.youtube.com/embed/dQw4w9WgXcQ?controls=0" 
                    frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen
                    class="w-full h-full"
                    title="Dummy Video Player">
                </iframe>
            </div>
            <p class="mt-3 text-sm text-gray-400">파일명: [컨텐츠명]_V1.2.mp4 | 버전: 2025-11-13</p>
        </section>

        <!-- 2. 댓글 및 리뷰 테이블 영역 (운영팀 요구: 데이터 밀집형) -->
        <section class="lg:col-span-1 card p-4 rounded-xl shadow-2xl flex flex-col h-full">
            <h2 class="text-xl font-semibold mb-3 text-gray-200">타임스탬프 리뷰 목록</h2>
            
            <div class="overflow-y-auto flex-grow rounded-lg" style="max-height: 500px;">
                <table id="commentTable" class="min-w-full text-sm rounded-lg border-collapse">
                    <thead class="sticky top-0 table-header text-gray-300">
                        <tr>
                            <th class="px-2 py-2 text-left">ID</th>
                            <th class="px-2 py-2 text-left">시간</th>
                            <th class="px-2 py-2 text-left">상태</th>
                            <th class="px-2 py-2 text-left">액션</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-700 text-gray-300">
                        <!-- JS로 채워질 더미 데이터 영역 -->
                    </tbody>
                </table>
            </div>

            <!-- 댓글 내용 미리보기/입력 영역 -->
            <div id="commentDetail" class="mt-4 p-3 bg-gray-700 rounded-lg text-sm transition-all duration-300">
                <p class="text-gray-400">선택된 댓글 내용이 여기에 표시됩니다.</p>
            </div>
        </section>
    </main>

    <script>
        // 초기 댓글 더미 데이터
        const initialComments = [
            { id: 1, time: "00:15", content: "인트로 폰트가 너무 작습니다. 폰트 크기 조정이 필요합니다.", status: "미반영" },
            { id: 2, time: "00:45", content: "배경 음악이 이 장면에 맞지 않게 너무 밝습니다. BGM 교체 검토 요망.", status: "미반영" },
            { id: 3, time: "01:30", content: "이 부분 슬라이드에 오타(미래 -> 미레)가 있습니다. 수정해주세요.", status: "반영 완료" },
            { id: 4, time: "02:10", content: "마무리 멘트는 5초 정도 줄여서 영상 길이를 2분 5초로 맞춥시다.", status: "미반영" },
        ];

        const commentTableBody = document.querySelector('#commentTable tbody');
        const commentDetail = document.getElementById('commentDetail');

        // 댓글 테이블 렌더링 함수
        function renderComments(comments) {
            commentTableBody.innerHTML = ''; // 기존 내용 초기화

            comments.forEach(comment => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-700 cursor-pointer transition duration-150 border-t border-gray-700';
                row.dataset.content = comment.content; // 상세 내용 저장을 위한 data 속성

                // ID, 시간 (타임스탬프)
                row.innerHTML = `
                    <td class="px-2 py-2">${comment.id}</td>
                    <td class="px-2 py-2 text-yellow-400 font-medium">${comment.time}</td>
                    <td class="px-2 py-2">
                        <span id="status-${comment.id}" class="px-2 py-1 rounded-full text-xs font-semibold ${comment.status === '반영 완료' ? 'bg-emerald-500/20 text-emerald-300' : 'bg-red-500/20 text-red-300'}">
                            ${comment.status}
                        </span>
                    </td>
                    <td class="px-2 py-2">
                        <button onclick="toggleStatus(${comment.id})" class="text-xs bg-indigo-600 hover:bg-indigo-700 text-white py-1 px-3 rounded-md transition duration-150">
                            상태 변경
                        </button>
                    </td>
                `;

                // 행 클릭 시 상세 내용 표시
                row.addEventListener('click', () => {
                    const content = row.dataset.content;
                    commentDetail.innerHTML = `<p class="font-bold text-gray-200">리뷰 시간: ${comment.time}</p><p class="mt-1">${content}</p>`;
                });

                commentTableBody.appendChild(row);
            });
        }

        // 상태 변경 토글 함수 (인터랙션 구현)
        window.toggleStatus = function(commentId) {
            const comment = initialComments.find(c => c.id === commentId);
            if (!comment) return;

            const newStatus = comment.status === '미반영' ? '반영 완료' : '미반영';
            comment.status = newStatus;

            const statusElement = document.getElementById(`status-${commentId}`);
            if (statusElement) {
                statusElement.textContent = newStatus;
                statusElement.className = `px-2 py-1 rounded-full text-xs font-semibold ${newStatus === '반영 완료' ? 'bg-emerald-500/20 text-emerald-300' : 'bg-red-500/20 text-red-300'}`;
            }

            // 회의 중 수정 요청에 대한 시각적 피드백 제공
            console.log(`Comment ${commentId} status changed to: ${newStatus}`);
        }

        // 초기 로드 시 렌더링
        window.onload = function() {
            renderComments(initialComments);

            // 승인/반려 버튼에 더미 로직 추가
            document.getElementById('approveBtn').addEventListener('click', () => {
                alertUser("✅ 최종 승인 요청이 접수되었습니다.", "bg-emerald-500");
            });
            document.getElementById('rejectBtn').addEventListener('click', () => {
                alertUser("❌ 반려 요청이 접수되었습니다. 상세 리뷰를 남겨주세요.", "bg-red-500");
            });
        }

        // 커스텀 알림 함수 (alert() 대체)
        function alertUser(message, bgColor) {
            const tempAlert = document.createElement('div');
            tempAlert.textContent = message;
            tempAlert.className = `fixed top-5 right-5 ${bgColor} text-white p-4 rounded-lg shadow-xl z-50 transition-transform duration-300 transform translate-x-0`;
            document.body.appendChild(tempAlert);

            setTimeout(() => {
                tempAlert.classList.add('translate-x-full');
                tempAlert.style.opacity = '0';
                setTimeout(() => tempAlert.remove(), 300);
            }, 3000);
        }

    </script>
</body>
</html>